<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Mon site{% endblock %}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script src="https://cdn.tailwindcss.com"></script>
    {# Personnalisation du th√®me Tailwind (ex: couleur primary) #}
    <script>
      tailwind = {
        config: {
          darkMode: 'class',
          theme: {
            extend: {
              colors: {
                primary: {
                  DEFAULT: '#4f46e5',
                  600: '#4f46e5',
                  700: '#4338ca'
                }
              }
            }
          }
        }
      }
    </script>
    {% block stylesheets %}{% endblock %}
</head>
<body class="bg-white text-slate-900 dark:bg-slate-900 dark:text-slate-100">
    {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
        {% include 'partials/_nav.html.twig' %}
    {% endif %}
    <main class="mx-auto max-w-4xl px-4 py-6 sm:px-6 lg:px-8">
        {% include 'partials/_alert.html.twig' ignore missing %}
        {% block body %}{% endblock %}
    </main>
    <!-- Bouton global Light/Dark -->
    <button id="theme-toggle" type="button"
            class="fixed bottom-4 right-4 z-50 inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white p-2 text-slate-700 shadow-lg hover:bg-slate-100
                   dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700"
            aria-label="Basculer clair/sombre" title="Mode clair/sombre">
      <span class="dark:hidden" aria-hidden="true">üåô</span>
      <span class="hidden dark:inline" aria-hidden="true">‚òÄÔ∏è</span>
    </button>

    <script>
      // Toggle du th√®me
      document.addEventListener('DOMContentLoaded', function () {
        const btn = document.getElementById('theme-toggle');
        if (!btn) return;
        const apply = (dark) => document.documentElement.classList.toggle('dark', dark);
        btn.addEventListener('click', function () {
          const dark = !document.documentElement.classList.contains('dark');
          apply(dark);
          try { localStorage.setItem('theme', dark ? 'dark' : 'light'); } catch (_) {}
        });
        try {
          if (!localStorage.getItem('theme')) {
            const mq = window.matchMedia('(prefers-color-scheme: dark)');
            mq.addEventListener?.('change', e => apply(e.matches));
          }
        } catch (_) {}
      });
    </script>
    {% block javascripts %}{% endblock %}
</body>
</html>